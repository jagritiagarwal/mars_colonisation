!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.PF=t()}}(function(){return function t(e,r,n){function o(s,a){if(!r[s]){if(!e[s]){var h="function"==typeof require&&require;if(!a&&h)return h(s,!0);if(i)return i(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=r[s]={exports:{}};e[s][0].call(u.exports,function(t){var r=e[s][1][t];return o(r||t)},u,u.exports,t,e,r,n)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(t,e){e.exports=t("./lib/heap")},{"./lib/heap":2}],2:[function(t,e){(function(){var t,r,n,o,i,s,a,h,l,u,p,f,g,c,d;n=Math.floor,u=Math.min,r=function(t,e){return e>t?-1:t>e?1:0},l=function(t,e,o,i,s){var a;if(null==o&&(o=0),null==s&&(s=r),0>o)throw new Error("lo must be non-negative");for(null==i&&(i=t.length);i>o;)s(e,t[a=n((o+i)/2)])<0?i=a:o=a+1;return[].splice.apply(t,[o,o-o].concat(e)),e},s=function(t,e,n){return null==n&&(n=r),t.push(e),c(t,0,t.length-1,n)},i=function(t,e){var n,o;return null==e&&(e=r),n=t.pop(),t.length?(o=t[0],t[0]=n,d(t,0,e)):o=n,o},h=function(t,e,n){var o;return null==n&&(n=r),o=t[0],t[0]=e,d(t,0,n),o},a=function(t,e,n){var o;return null==n&&(n=r),t.length&&n(t[0],e)<0&&(e=(o=[t[0],e])[0],t[0]=o[1],d(t,0,n)),e},o=function(t,e){var o,i,s,a,h,l;for(null==e&&(e=r),h=[],i=0,s=(a=function(){l=[];for(var e=0,r=n(t.length/2);r>=0?r>e:e>r;r>=0?e++:e--)l.push(e);return l}.apply(this).reverse()).length;s>i;i++)o=a[i],h.push(d(t,o,e));return h},g=function(t,e,n){var o;return null==n&&(n=r),-1!==(o=t.indexOf(e))?(c(t,0,o,n),d(t,o,n)):void 0},p=function(t,e,n){var i,s,h,l,u;if(null==n&&(n=r),!(s=t.slice(0,e)).length)return s;for(o(s,n),h=0,l=(u=t.slice(e)).length;l>h;h++)i=u[h],a(s,i,n);return s.sort(n).reverse()},f=function(t,e,n){var s,a,h,p,f,g,c,d,v;if(null==n&&(n=r),10*e<=t.length){if(!(h=t.slice(0,e).sort(n)).length)return h;for(a=h[h.length-1],p=0,g=(c=t.slice(e)).length;g>p;p++)n(s=c[p],a)<0&&(l(h,s,0,null,n),h.pop(),a=h[h.length-1]);return h}for(o(t,n),v=[],f=0,d=u(e,t.length);d>=0?d>f:f>d;d>=0?++f:--f)v.push(i(t,n));return v},c=function(t,e,n,o){var i,s,a;for(null==o&&(o=r),i=t[n];n>e&&o(i,s=t[a=n-1>>1])<0;)t[n]=s,n=a;return t[n]=i},d=function(t,e,n){var o,i,s,a,h;for(null==n&&(n=r),i=t.length,h=e,s=t[e],o=2*e+1;i>o;)i>(a=o+1)&&!(n(t[o],t[a])<0)&&(o=a),t[e]=t[o],o=2*(e=o)+1;return t[e]=s,c(t,h,e,n)},t=function(){function t(t){this.cmp=null!=t?t:r,this.nodes=[]}return t.push=s,t.pop=i,t.replace=h,t.pushpop=a,t.heapify=o,t.nlargest=p,t.nsmallest=f,t.prototype.push=function(t){return s(this.nodes,t,this.cmp)},t.prototype.pop=function(){return i(this.nodes,this.cmp)},t.prototype.peek=function(){return this.nodes[0]},t.prototype.contains=function(t){return-1!==this.nodes.indexOf(t)},t.prototype.replace=function(t){return h(this.nodes,t,this.cmp)},t.prototype.pushpop=function(t){return a(this.nodes,t,this.cmp)},t.prototype.heapify=function(){return o(this.nodes,this.cmp)},t.prototype.updateItem=function(t){return g(this.nodes,t,this.cmp)},t.prototype.clear=function(){return this.nodes=[]},t.prototype.empty=function(){return 0===this.nodes.length},t.prototype.size=function(){return this.nodes.length},t.prototype.clone=function(){var e;return(e=new t).nodes=this.nodes.slice(0),e},t.prototype.toArray=function(){return this.nodes.slice(0)},t.prototype.insert=t.prototype.push,t.prototype.remove=t.prototype.pop,t.prototype.top=t.prototype.peek,t.prototype.front=t.prototype.peek,t.prototype.has=t.prototype.contains,t.prototype.copy=t.prototype.clone,t}(),(null!=e?e.exports:void 0)?e.exports=t:window.Heap=t}).call(this)},{}],3:[function(t,e){function r(t,e,r,n){this.width=t,this.height=e,this.nodes=this._buildNodes(t,e,r)}var n=t("./Node");r.prototype._buildNodes=function(t,e,r){var o,i,s=new Array(e);for(o=0;e>o;++o)for(s[o]=new Array(t),i=0;t>i;++i)s[o][i]=new n(i,o);if(void 0===r)return s;if(r.length!==e||r[0].length!==t)throw new Error("Matrix size does not fit");for(o=0;e>o;++o)for(i=0;t>i;++i)r[o][i]&&(s[o][i].walkable=!1);return s},r.prototype.getNodeAt=function(t,e){return this.nodes[e][t]},r.prototype.isWalkableAt=function(t,e){return this.isInside(t,e)&&this.nodes[e][t].walkable},r.prototype.isNstopAt=function(t,e){return this.isInside(t,e)&&this.nodes[e][t].Nstop},r.prototype.isInside=function(t,e){return t>=0&&t<this.width&&e>=0&&e<this.height},r.prototype.setWalkableAt=function(t,e,r){this.nodes[e][t].walkable=r},r.prototype.setNstopAt=function(t,e,r){this.nodes[e][t].Nstop=r},r.prototype.getNeighbors=function(t,e,r){var n=t.x,o=t.y,i=[],s=!1,a=!1,h=!1,l=!1,u=!1,p=!1,f=!1,g=!1,c=this.nodes;return this.isWalkableAt(n,o-1)&&(i.push(c[o-1][n]),s=!0),this.isWalkableAt(n+1,o)&&(i.push(c[o][n+1]),h=!0),this.isWalkableAt(n,o+1)&&(i.push(c[o+1][n]),u=!0),this.isWalkableAt(n-1,o)&&(i.push(c[o][n-1]),f=!0),e?(r?(a=f&&s,l=s&&h,p=h&&u,g=u&&f):(a=f||s,l=s||h,p=h||u,g=u||f),a&&this.isWalkableAt(n-1,o-1)&&i.push(c[o-1][n-1]),l&&this.isWalkableAt(n+1,o-1)&&i.push(c[o-1][n+1]),p&&this.isWalkableAt(n+1,o+1)&&i.push(c[o+1][n+1]),g&&this.isWalkableAt(n-1,o+1)&&i.push(c[o+1][n-1]),i):i},r.prototype.clone=function(){var t,e,o=this.width,i=this.height,s=this.nodes,a=new r(o,i),h=new Array(i);for(t=0;i>t;++t)for(h[t]=new Array(o),e=0;o>e;++e)h[t][e]=new n(e,t,s[t][e].walkable,s[t][e].Nstop);return a.nodes=h,a},e.exports=r},{"./Node":5}],4:[function(t,e){e.exports={manhattan:function(t,e){return t+e},euclidean:function(t,e){return Math.sqrt(t*t+e*e)},octile:function(t,e){var r=Math.SQRT2-1;return e>t?r*t+e:r*e+t},chebyshev:function(t,e){return Math.max(t,e)}}},{}],5:[function(t,e){e.exports=function(t,e,r,n){this.x=t,this.y=e,this.walkable=void 0===r||r,this.Nstop=void 0===n||n}},{}],6:[function(t,e,r){function n(t){for(var e=[[t.x,t.y]];t.parent;)t=t.parent,e.push([t.x,t.y]);return e.reverse()}function o(t,e,r,n){var o,i,s,a,h,l,u=Math.abs,p=[];for(o=r>t?1:-1,i=n>e?1:-1,h=(s=u(r-t))-(a=u(n-e));p.push([t,e]),t!==r||e!==n;)(l=2*h)>-a&&(h-=a,t+=o),s>l&&(h+=s,e+=i);return p}r.backtrace=n,r.biBacktrace=function(t,e){var r=n(t),o=n(e);return r.concat(o.reverse())},r.pathLength=function(t){var e,r,n,o,i,s=0;for(e=1;e<t.length;++e)r=t[e-1],n=t[e],o=r[0]-n[0],i=r[1]-n[1],s+=Math.sqrt(o*o+i*i);return s},r.interpolate=o,r.expandPath=function(t){var e,r,n,i,s,a,h=[],l=t.length;if(2>l)return h;for(s=0;l-1>s;++s)for(e=t[s],r=t[s+1],i=(n=o(e[0],e[1],r[0],r[1])).length,a=0;i-1>a;++a)h.push(n[a]);return h.push(t[l-1]),h},r.smoothenPath=function(t,e){var r,n,i,s,a,h,l,u,p,f,g,c,d,v=e.length,y=e[0][0],w=e[0][1],b=e[v-1][0],A=e[v-1][1];for(r=y,n=w,a=e[1][0],h=e[1][1],l=[[r,n]],u=2;v>u;++u){for(g=o(r,n,i=(f=e[u])[0],s=f[1]),d=!1,p=1;p<g.length;++p)if(c=g[p],!t.isWalkableAt(c[0],c[1])){d=!0,l.push([a,h]),r=a,n=h;break}d||(a=i,h=s)}return l.push([b,A]),l},r.compressPath=function(t){if(t.length<3)return t;var e,r,n,o,i,s,a=[],h=t[0][0],l=t[0][1],u=t[1][0],p=t[1][1],f=u-h,g=p-l;for(f/=i=Math.sqrt(f*f+g*g),g/=i,a.push([h,l]),s=2;s<t.length;s++)e=u,r=p,n=f,o=g,f=(u=t[s][0])-e,g=(p=t[s][1])-r,g/=i=Math.sqrt(f*f+g*g),((f/=i)!==n||g!==o)&&a.push([e,r]);return a.push([u,p]),a}},{}],7:[function(t,e){function r(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.heuristic=t.heuristic||i.manhattan,this.weight=t.weight||1}var n=t("heap"),o=t("../core/Util"),i=t("../core/Heuristic");r.prototype.findPath=function(t,e,r,i,s){var a,h,l,u,p,f,g,c,d=new n(function(t,e){return t.f-e.f}),v=s.getNodeAt(t,e),y=s.getNodeAt(r,i),w=this.heuristic,b=this.allowDiagonal,A=this.dontCrossCorners,N=this.weight,x=Math.abs,m=Math.SQRT2;for(v.g=0,v.f=0,d.push(v),v.opened=!0;!d.empty();){if((a=d.pop()).closed=!0,a===y)return o.backtrace(y);for(u=0,p=(h=s.getNeighbors(a,b,A)).length;p>u;++u)(l=h[u]).closed||(f=l.x,g=l.y,c=a.g+(0==f-a.x||0==g-a.y?1:m),(!l.opened||c<l.g)&&(l.g=c,l.h=l.h||N*w(x(f-r),x(g-i)),l.f=l.g+l.h,l.parent=a,l.opened?d.updateItem(l):(d.push(l),l.opened=!0)))}return[]},e.exports=r},{"../core/Heuristic":4,"../core/Util":6,heap:1}],8:[function(t,e){function r(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.heuristic=t.heuristic||n.manhattan,this.weight=t.weight||1}t("heap"),t("../core/Util");var n=t("../core/Heuristic"),o=(this.heuristic,this.allowDiagonal,this.weight,Math.abs,Math.SQRT2,[]),i=1e7;r.prototype.findPath=function(t,e,r,n,o){var i=o.getNodeAt(t,e),s=o.getNodeAt(r,n),a=[];a.push(s);for(var h=0;h<40;h++)for(var l=0;l<60;l++)0==o.isNstopAt(l,h)&&a.push(o.getNodeAt(l,h));var u=new Map([[i,1]]),p=new Map([[i,-1]]),f=algo_ast(i,a,o,u,p,this.allowDiagonal,this.heuristic);for(e=[[f[0].x,f[0].y]],h=1;h<f.length;h++)e.push([f[h].x,f[h].y]);return e},ast2=function(t,e,r,n,o,i,s){for(var a=Math.SQRT2,h=0;h<40;h++)for(var l=0;l<60;l++)o.getNodeAt(l,h).f=0,o.getNodeAt(l,h).h=0,o.getNodeAt(l,h).g=0,o.getNodeAt(l,h).parent=null;var u=o.getNodeAt(t,e),p=o.getNodeAt(r,n),f=[],g=[];for(f.push(u);f.length>0;){for(var c=0,d=0;d<f.length;d++)f[d].f<f[c].f&&(c=d);var v=f[c];if(v===p){for(var y=v,w=[];y.parent;)w.push(y),y=y.parent;return w.push(y),w}f.splice(c,1),g.push(v);var b=o.getNeighbors(v,i);for(d=0;d<b.length;d++){var A=b[d];if(-1==g.findIndex(t=>t===A)){h=A.x,l=A.y;var N=v.g+(h-v.x==0||l-v.y==0?1:a),x=!1;-1===f.findIndex(t=>t===A)?(x=!0,A.h=s(Math.abs(h-p.x),Math.abs(l-p.y)),f.push(A)):N<A.g&&(x=!0),x&&(A.parent=v,A.g=N,A.f=A.g+A.h)}}}return[]},algo_ast=function(t,e,r,n,s,a,h){for(var l=0,u=0;u<e.length;u++)if(!n.has(e[u])||!n.get(e[u])){l=1,n.set(e[u],1),s.set(e[u],t);var p=algo_ast(e[u],e,r,n,s,a,h);p.length<i&&(i=(o=p).length),n.set(e[u],0),s.set(e[u],-1)}if(0==l){for(var f=[];-1!=s.get(t);){var g=ast2(s.get(t).x,s.get(t).y,t.x,t.y,r,a,h);for(u=0;u<g.length;u++)f.push(g[u]);t=s.get(t),f.push(t)}return f}return o},e.exports=r},{"../core/Heuristic":4,"../core/Util":6,heap:1}],9:[function(t,e){function r(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.heuristic=t.heuristic||i.manhattan,this.weight=t.weight||1}var n=t("heap"),o=t("../core/Util"),i=t("../core/Heuristic");r.prototype.findPath=function(t,e,r,i,s){var a,h,l,u,p,f,g,c,d=function(t,e){return t.f-e.f},v=new n(d),y=new n(d),w=s.getNodeAt(t,e),b=s.getNodeAt(r,i),A=this.heuristic,N=this.allowDiagonal,x=this.dontCrossCorners,m=this.weight,D=Math.abs,_=Math.SQRT2;for(w.g=0,w.f=0,v.push(w),w.opened=1,b.g=0,b.f=0,y.push(b),b.opened=2;!v.empty()&&!y.empty();){for((a=v.pop()).closed=!0,u=0,p=(h=s.getNeighbors(a,N,x)).length;p>u;++u)if(!(l=h[u]).closed){if(2===l.opened)return o.biBacktrace(a,l);f=l.x,g=l.y,c=a.g+(0==f-a.x||0==g-a.y?1:_),(!l.opened||c<l.g)&&(l.g=c,l.h=l.h||m*A(D(f-r),D(g-i)),l.f=l.g+l.h,l.parent=a,l.opened?v.updateItem(l):(v.push(l),l.opened=1))}for((a=y.pop()).closed=!0,u=0,p=(h=s.getNeighbors(a,N,x)).length;p>u;++u)if(!(l=h[u]).closed){if(1===l.opened)return o.biBacktrace(l,a);f=l.x,g=l.y,c=a.g+(0==f-a.x||0==g-a.y?1:_),(!l.opened||c<l.g)&&(l.g=c,l.h=l.h||m*A(D(f-t),D(g-e)),l.f=l.g+l.h,l.parent=a,l.opened?y.updateItem(l):(y.push(l),l.opened=2))}}return[]},e.exports=r},{"../core/Heuristic":4,"../core/Util":6,heap:1}],11:[function(t,e){function r(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners}var n=t("../core/Util");r.prototype.findPath=function(t,e,r,o,i){var s,a,h,l,u,p=i.getNodeAt(t,e),f=i.getNodeAt(r,o),g=[],c=[],d=this.allowDiagonal,v=this.dontCrossCorners;for(g.push(p),p.opened=!0,p.by=0,c.push(f),f.opened=!0,f.by=1;g.length&&c.length;){for((h=g.shift()).closed=!0,l=0,u=(s=i.getNeighbors(h,d,v)).length;u>l;++l)if(!(a=s[l]).closed)if(a.opened){if(1===a.by)return n.biBacktrace(h,a)}else g.push(a),a.parent=h,a.opened=!0,a.by=0;for((h=c.shift()).closed=!0,l=0,u=(s=i.getNeighbors(h,d,v)).length;u>l;++l)if(!(a=s[l]).closed)if(a.opened){if(0===a.by)return n.biBacktrace(a,h)}else c.push(a),a.parent=h,a.opened=!0,a.by=1}return[]},e.exports=r},{"../core/Util":6}],12:[function(t,e){function r(t){n.call(this,t),this.heuristic=function(){return 0}}var n=t("./BiAStarFinder");r.prototype=new n,r.prototype.constructor=r,e.exports=r},{"./BiAStarFinder":9}],13:[function(t,e){function r(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners}var n=t("../core/Util");r.prototype.findPath=function(t,e,r,o,i){var s,a,h,l,u,p=[],f=this.allowDiagonal,g=this.dontCrossCorners,c=i.getNodeAt(t,e),d=i.getNodeAt(r,o);for(p.push(c),c.opened=!0;p.length;){if((h=p.shift()).closed=!0,h===d)return n.backtrace(d);for(l=0,u=(s=i.getNeighbors(h,f,g)).length;u>l;++l)(a=s[l]).closed||a.opened||(p.push(a),a.opened=!0,a.parent=h)}return[]},e.exports=r},{"../core/Util":6}],14:[function(t,e){function r(t){n.call(this,t),this.heuristic=function(){return 0}}var n=t("./AStarFinder");r.prototype=new n,r.prototype.constructor=r,e.exports=r},{"./AStarFinder":7}],15:[function(t,e){function r(t){t=t||{},this.allowDiagonal=t.allowDiagonal}t("../core/Util");r.prototype.findPath=function(t,e,r,n,o){this.allowDiagonal;for(var i=o.getNodeAt(t,e),s=o.getNodeAt(r,n),a=[],h=0;h<40;h++)for(var l=0;l<60;l++)0==o.isNstopAt(l,h)&&(0,a.push(o.getNodeAt(l,h)));var u=new Map([[i,1]]),p=(new Map([[i,-1]]),[]),f=i;multi2=function(t,e,r,n,o){for(var i=[],s=1e8,a=t,h=0;h<r.length;h++)if(!e.has(r[h])||!e.get(r[h])){var l=bfs(t,r[h],n,o);l.length<s&&(s=l.length,i=l,a=r[h])}return e.set(a,1),i},p.push(i);for(var g=multi2(f,u,a,o,this.allowDiagonal);g.length;){for(h=0;h<g.length-1;h++)p.push(g[h]);p.push(g[h]),f=p[p.length-1],g=multi2(f,u,a,o,this.allowDiagonal)}var c=bfs(f,s,o,this.allowDiagonal);for(h=0;h<c.length;h++)p.push(c[h]);for(e=[[p[0].x,p[0].y]],h=1;h<p.length;h++)e.push([p[h].x,p[h].y]);return e},bfs=function(t,e,r,n){var o=[],i=new Map([[t,1]]),s=new Map([]),a=[];for(a.push(t);a.length;){var h=a.shift();if(h==e){for(;h!=t;)o.push(h),h=s.get(h);return o.reverse(),o}var l;l=r.getNeighbors(h,n);for(var u=0;u<l.length;++u)neighbor=l[u],i.has(neighbor)||(a.push(neighbor),i.set(neighbor,1),s.set(neighbor,h))}},e.exports=r},{"../core/Util":6}],16:[function(t,e){function r(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners}var n=t("../core/Util");r.prototype.findPath=function(t,e,r,o,i){var s,a,h,l,u=[],p=this.allowDiagonal,f=this.dontCrossCorners,g=i.getNodeAt(t,e),c=(i.getNodeAt(r,o),[]),d=1;c.push(i.getNodeAt(r,o));for(var v=0;v<40;v++)for(var y=0;y<60;y++)0==i.isNstopAt(y,v)&&(d++,c.push(i.getNodeAt(y,v)));for(u.push(g),g.opened=!0;u.length;){if((h=u.shift()).closed=!0)for(var w=0;w<c.length;w++)if(h===c[w])return n.backtrace(h);for(l=0,d=(s=i.getNeighbors(h,p,f)).length;d>l;++l)(a=s[l]).closed||a.opened||(u.push(a),a.opened=!0,a.parent=h)}return[]},e.exports=r},{"../core/Util":6}],18:[function(t,e){function r(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.heuristic=t.heuristic||n.manhattan,this.weight=t.weight||1}t("heap"),t("../core/Util");var n=t("../core/Heuristic");this.heuristic,this.allowDiagonal,this.weight,Math.abs,Math.SQRT2;r.prototype.findPath=function(t,e,r,n,o){var i=o.getNodeAt(r,n),s=[];s.push(i);for(var a=0;a<40;a++)for(var h=0;h<60;h++)0==o.isNstopAt(h,a)&&s.push(o.getNodeAt(h,a));var l=[],u=1e7;for(a=0;a<s.length;a++){var p=ast(t,e,s[a].x,s[a].y,o,this.allowDiagonal,this.heuristic);p.length<u&&(l=p,u=p.length,s[a])}for(e=[[l[0].x,l[0].y]],a=1;a<l.length;a++)e.push([l[a].x,l[a].y]);return e},ast=function(t,e,r,n,o,i,s){for(var a=Math.SQRT2,h=0;h<40;h++)for(var l=0;l<60;l++)o.getNodeAt(l,h).f=0,o.getNodeAt(l,h).h=0,o.getNodeAt(l,h).g=0,o.getNodeAt(l,h).parent=null;var u=o.getNodeAt(t,e),p=o.getNodeAt(r,n),f=[],g=[];for(f.push(u);f.length>0;){for(var c=0,d=0;d<f.length;d++)f[d].f<f[c].f&&(c=d);var v=f[c];if(v===p){for(var y=v,w=[];y.parent;)w.push(y),y=y.parent;return w.push(y),w.reverse()}f.splice(c,1),g.push(v);var b=o.getNeighbors(v,i);for(d=0;d<b.length;d++){var A=b[d];if(-1==g.findIndex(t=>t===A)){h=A.x,l=A.y;var N=v.g+(h-v.x==0||l-v.y==0?1:a),x=!1;-1===f.findIndex(t=>t===A)?(x=!0,A.h=s(Math.abs(h-p.x),Math.abs(l-p.y)),f.push(A)):N<A.g&&(x=!0),x&&(A.parent=v,A.g=N,A.f=A.g+A.h)}}}return[]},e.exports=r},{"../core/Heuristic":4,"../core/Util":6,heap:1}],19:[function(t,e){function r(t){t=t||{},this.allowDiagonal=t.allowDiagonal}var n=1e7,o=[];t("../core/Util");r.prototype.findPath=function(t,e,r,n,o){this.allowDiagonal,this.dontCrossCorners;var i=o.getNodeAt(t,e),s=(o.getNodeAt(r,n),[]);s.push(o.getNodeAt(r,n));for(var a=0;a<40;a++)for(var h=0;h<60;h++)0==o.isNstopAt(h,a)&&(0,s.push(o.getNodeAt(h,a)));var l=new Map([[i,1]]),u=new Map([[i,-1]]),p=algo(i,s,o,l,u,this.allowDiagonal);for(e=[[p[0].x,p[0].y]],a=1;a<p.length;a++)e.push([p[a].x,p[a].y]);return e},bfs3=function(t,e,r,n){var o=[],i=new Map([[t,1]]),s=new Map([]),a=[];for(a.push(t);a.length;){var h=a.shift();if(h==e){for(;h!=t;)o.push(h),h=s.get(h);return o}var l;l=r.getNeighbors(h,n);for(var u=0;u<l.length;++u)neighbor=l[u],i.has(neighbor)||(a.push(neighbor),i.set(neighbor,1),s.set(neighbor,h))}},algo=function(t,e,r,i,s,a){for(var h=0,l=0;l<e.length;l++)if(!i.has(e[l])||!i.get(e[l])){h=1,i.set(e[l],1),s.set(e[l],t);var u=algo(e[l],e,r,i,s,a);u.length<n&&(n=(o=u).length),i.set(e[l],0),s.set(e[l],-1)}if(0==h){for(var p=[];-1!=s.get(t);){var f=bfs3(s.get(t),t,r,a);for(l=0;l<f.length;l++)p.push(f[l]);t=s.get(t),p.push(t)}return p}return o},e.exports=r},{"../core/Util":6}],20:[function(t,e){function r(t){t=t||{},this.allowDiagonal=t.allowDiagonal,this.heuristic=t.heuristic||n.manhattan,this.weight=t.weight||1}t("heap"),t("../core/Util");var n=t("../core/Heuristic");this.heuristic,this.allowDiagonal,this.weight,Math.abs,Math.SQRT2;r.prototype.findPath=function(t,e,r,n,o){for(var i=o.getNodeAt(t,e),s=o.getNodeAt(r,n),a=[],h=0;h<40;h++)for(var l=0;l<60;l++)0==o.isNstopAt(l,h)&&a.push(o.getNodeAt(l,h));var u=new Map([[i,1]]),p=(new Map([[i,-1]]),[]),f=i;multi2_astar=function(t,e,r,n,o,i){for(var s=[],a=1e8,h=t,l=0;l<r.length;l++)if(!e.has(r[l])||!e.get(r[l])){var u=ast(t.x,t.y,r[l].x,r[l].y,n,o,i);u.length<a&&(a=u.length,s=u,h=r[l])}return e.set(h,1),s},p.push(i);for(var g=multi2_astar(f,u,a,o,this.allowDiagonal,this.heuristic);g.length;){for(h=0;h<g.length-1;h++)p.push(g[h]);p.push(g[h]),f=p[p.length-1],g=multi2_astar(f,u,a,o,this.allowDiagonal,this.heuristic)}var c=ast(f.x,f.y,s.x,s.y,o,this.allowDiagonal,this.heuristic);for(h=0;h<c.length;h++)p.push(c[h]);for(e=[[p[0].x,p[0].y]],h=1;h<p.length;h++)e.push([p[h].x,p[h].y]);return e},ast=function(t,e,r,n,o,i,s){for(var a=Math.SQRT2,h=0;h<40;h++)for(var l=0;l<60;l++)o.getNodeAt(l,h).f=0,o.getNodeAt(l,h).h=0,o.getNodeAt(l,h).g=0,o.getNodeAt(l,h).parent=null;var u=o.getNodeAt(t,e),p=o.getNodeAt(r,n),f=[],g=[];for(f.push(u);f.length>0;){for(var c=0,d=0;d<f.length;d++)f[d].f<f[c].f&&(c=d);var v=f[c];if(v===p){for(var y=v,w=[];y.parent;)w.push(y),y=y.parent;return w.push(y),w.reverse()}f.splice(c,1),g.push(v);var b=o.getNeighbors(v,i);for(d=0;d<b.length;d++){var A=b[d];if(-1==g.findIndex(t=>t===A)){h=A.x,l=A.y;var N=v.g+(h-v.x==0||l-v.y==0?1:a),x=!1;-1===f.findIndex(t=>t===A)?(x=!0,A.h=s(Math.abs(h-p.x),Math.abs(l-p.y)),f.push(A)):N<A.g&&(x=!0),x&&(A.parent=v,A.g=N,A.f=A.g+A.h)}}}return[]},e.exports=r},{"../core/Heuristic":4,"../core/Util":6,heap:1}],21:[function(t,e){e.exports={Heap:t("heap"),Node:t("./core/Node"),Grid:t("./core/Grid"),Util:t("./core/Util"),Heuristic:t("./core/Heuristic"),AStarFinder:t("./finders/AStarFinder"),BreadthFirstFinder:t("./finders/BreadthFirstFinder"),DijkstraFinder:t("./finders/DijkstraFinder"),BiAStarFinder:t("./finders/BiAStarFinder"),BiBreadthFirstFinder:t("./finders/BiBreadthFirstFinder"),BiDijkstraFinder:t("./finders/BiDijkstraFinder"),closest_destination_astar:t("./finders/closest_destination_astar"),closest_destination_bfs:t("./finders/closest_destination_bfs"),multiple_stop_bfs:t("./finders/multiple_stop_bfs"),multiple_visitation_bfs:t("./finders/multiple_visitation_bfs"),multiple_stop_astar:t("./finders/multiple_stop_astar"),multiple_visitation_astar:t("./finders/multiple_visitation_astar")}},{"./core/Grid":3,"./core/Heuristic":4,"./core/Node":5,"./core/Util":6,"./finders/AStarFinder":7,"./finders/multiple_stop_astar":8,"./finders/BiAStarFinder":9,"./finders/BiBreadthFirstFinder":11,"./finders/BiDijkstraFinder":12,"./finders/BreadthFirstFinder":13,"./finders/DijkstraFinder":14,"./finders/closest_destination_astar":18,"./finders/multiple_stop_bfs":19,"./finders/closest_destination_bfs":16,"./finders/multiple_visitation_bfs":15,"./finders/multiple_visitation_astar":20,heap:1}]},{},[21])(21)});
